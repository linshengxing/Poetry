{% extends "base.html" %} {% block main %}
<ul class="nav justify-content-end align-items-center mr-5" style="height: 80px;max-width: 1400px;">
    <li class="nav-item m-2">
        <button type="button" class="btn btn-light" onclick="refresh()"><strong>Refresh</strong></button>
    </li>
    <li class="nav-item m-2">
        <button type="button" class="btn btn-light" onclick="download()"><strong>Download</strong></button>
    </li>
    <li class="nav-item"></li>
</ul>
<div class="container-fluid">
    <table class="main-content oneword-content">
        <tbody>
            <tr>
                <td id="content">{{ poetry.content }}</td>
            </tr>
            <tr>
                <td id="author">{{ '--' + poetry.author + poetry.title }}</td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    var download = () => {
        var content = $('#content').text();
        var url = '/download?content=' + content; 
        window.open(url, '_self');
    }

    var refresh = () => {
        $.ajax({
            url: '/refresh',
            method: 'get',
            success: function (returnData) {
                debugger
                if (returnData.success) {
                    var contentText = returnData.data.poetry.content;
                    var authorText = '--' + returnData.data.poetry.author + returnData.data.poetry.title;
                    $('#content').html(contentText);
                    $('#author').html(authorText);
                }
            }
        });
    }
</script>
{% endblock %}
